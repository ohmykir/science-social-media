<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</title>
    <link rel="stylesheet" th:href="@{/styles/common.css}">
</head>
<body>

<nav class="navbar">
    <div class="nav-container">
        <a th:href="@{/}" class="logo">üî¨ SciNet</a>
        <div class="nav-links">
            <a th:href="@{/}" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
            <a th:href="@{/user(id=${user.id})}" class="nav-link">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
            <a th:href="@{/logout}" class="nav-link btn-logout">–í—ã–π—Ç–∏</a>
        </div>
    </div>
</nav>

<div class="container">
    <div class="edit-profile-form">
        <h1>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h1>

        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
        <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

        <form th:action="@{/user/edit}" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label>–õ–æ–≥–∏–Ω (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å)</label>
                <input type="text" th:value="${user.username}" disabled>
            </div>

            <div class="form-group">
                <label for="firstName">–ò–º—è</label>
                <input type="text" id="firstName" name="firstName" th:value="${user.firstName}" required>
            </div>

            <div class="form-group">
                <label for="lastName">–§–∞–º–∏–ª–∏—è</label>
                <input type="text" id="lastName" name="lastName" th:value="${user.lastName}" required>
            </div>

            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" th:value="${user.email}" required>
            </div>

            <div class="form-group">
                <label for="bio">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
                <textarea id="bio" name="bio" rows="4" th:text="${user.bio}"></textarea>
            </div>

            <div class="form-group">
                <label for="photo">–§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è</label>
                <input type="file" id="photo" name="photo" accept="image/*">
                <small>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB</small>

                <div th:if="${user.profilePhotoPath}" class="current-photo">
                    <p>–¢–µ–∫—É—â–µ–µ —Ñ–æ—Ç–æ:</p>
                    <img th:src="@{${user.profilePhotoPath}}" alt="–¢–µ–∫—É—â–µ–µ —Ñ–æ—Ç–æ" style="max-width: 200px;">
                </div>
            </div>

            <button type="submit" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            <a th:href="@{/user(id=${user.id})}" class="btn-secondary">–û—Ç–º–µ–Ω–∞</a>
        </form>
    </div>
</div>

</body>
</html>
